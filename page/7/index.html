<!DOCTYPE html>
<html>

<head>
	<meta name="generator" content="Hugo 0.18.1" />
    <base href="https://ioerr.github.io/">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>读写错误 </title>
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="bookmark" href="/favicon.ico">
    <link rel="canonical" href="https://ioerr.github.io/">
    
    <link href="https://ioerr.github.io/index.xml" rel="alternate" type="application/rss+xml" title="读写错误" />
    
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    
    <link rel="stylesheet" href="/css/default.min.css">
    
    <script src="/js/highlight.min.js"></script>
    
    <script>hljs.initHighlightingOnLoad();</script>
</head>

<body>
    <div class="navbar">
        <ul>
            <li><a href="/">HOME</a></li>
            <li><a href="/categories">CATEGORIES</a></li>
            <li><a href="/project">PROJECTS</a></li>
        </ul>
    </div>
    <div class="container">
      <div class="title">
        <div>
          <a href="/">
            <img src="/images/logo.svg" />
          </a>
        </div>
        <div><img src="/images/seperator.svg" /></div>
        <div class="logo-title">Don't Panic</div>
      </div>


  <a href="https://ioerr.github.io/dianshang-wangzhan-sousuo-tiyan-de-wenti/">
  <div class="post-title">
    <img src="/images/post-title-icon.svg" />
    <div class="post-meta">
      <time>19 Jan 2017, 16:44</time>
      <h1>电商网站搜索体验的问题</h1>
    </div>
  </div>
</a>

<div class="post-toc">
  <span class="title">
    Table of contents
  </span>
  
</div>

<section class="post-content">
  <p>不得不说在淘宝、天猫这种有大量第三方商家入驻的平台搜索商品的体验非常差。</p>

<p>一大问题就是商品图片相互抄袭多，一个关键词搜出来的结果，满屏幕都是雷同的图片。<br />
不但毫无区分商品的作用，还变相鼓励商家互相抄袭——反正用户也不在乎/没法在乎商品图片的差异，为何不偷别人的图片呢？</p>

<p>如果搜索结果可以适当合并，商品图片雷同的放到二级目录，会不会有所改善呢？</p>

<p>第二个问题是商品如果有多个套餐，在搜索结果中只能看到其套餐的最高、最低价格范围。<br />
结果就是，套餐并不便宜的商品，可以增加一个便宜的鸡肋选项，导致看上去价格低于套餐相对便宜的商品，于是在按价格排序的搜索结果中排名前列。<br />
而且套餐捆绑的附属商品不一样，价格千差万别，直接用套餐价格排序，对用户来说参考价值就很低了。</p>

<p>举个例子：<br />
店家甲的套餐如下：</p>

<ul>
<li>套餐一15000元：相机+三脚架+存储卡</li>
<li>套餐二17000元：相机+三脚架+存储卡+某镜头</li>
</ul>

<p>店家乙的套餐如下：</p>

<ul>
<li>套餐一15000元：相机+存储卡+读卡器+副厂电池+闪光灯</li>
<li>套餐二16000元：相机+存储卡+读卡器+原厂电池+原厂充电器+相机包+闪光灯+引闪线++UV镜</li>
</ul>

<p>这时一个已经有闪光灯，不需要多配电池、相机包，但是可能需要三脚架和替换镜头的消费者，无法直接在搜索结果中了解到店家甲的套餐可能更合适，而店家乙的套餐根本不用看。<br />
他只能一个个的点进去看价格可能更便宜但不合适的套餐商品，然后一次次的退出来继续寻找。</p>

<p>这就涉及到电商平台套餐内商品资源登记管理和组合的基础架构问题，搜索操作的后台性能消耗也可能剧增。<br />
要是发生变更，第三方商家也要改变编辑商品信息的操作方式。</p>

<p>第三个问题是商品描述信息仍然不准确、缺少分类。</p>

<p>一大原因是第三方商家滥用关键字。<br />
且不说韩式、北欧、极简、英伦等关键字泛滥，有时候连基本的款式、颜色、配置都可以瞎说。</p>

<p>其次则是商品信息仍然无法详细、准确地录入和筛选，这方面要耗费极大的人工，还难以保证精确。<br />
虽然许多电商平台提供了一些属性信息做筛选，但还远远不够用。<br />
比如说，买键盘要筛选键帽类型、带不带酷炫灯光，买相机要筛有没有匹配卡口的指定焦段的配套镜头，买折叠自行车要筛选前后轮刹车类型，买电脑要筛选是否可自己扩展内存，等等等等……<br />
甚至如果达到理想状态的话，其他买家针对某个属性的评价也应该要直接列入筛选选项中。</p>

<p>而现在的搜索和筛选结果实在距离这个要求太远。<br />
结果就是，如果有得选择，我还是更加相信专业的评测（比如 <a href="http://thewirecutter.com/">Wirecutter</a>）、身边熟人的推荐，并尽量在靠谱的 B2C 电商平台上购买。</p>

</section>

<div class="comment">
  <a href="http://twitter.com/intent/tweet?url=https%3a%2f%2fioerr.github.io%2fdianshang-wangzhan-sousuo-tiyan-de-wenti%2f&text= @calon %e7%94%b5%e5%95%86%e7%bd%91%e7%ab%99%e6%90%9c%e7%b4%a2%e4%bd%93%e9%aa%8c%e7%9a%84%e9%97%ae%e9%a2%98&tw_p=tweetbutton" onclick="window.open(this.href); return false;"><i class="fa fa-twitter"></i></a>
  <a href="mailto:calon.xu@gmail.com?subject=评论《%e7%94%b5%e5%95%86%e7%bd%91%e7%ab%99%e6%90%9c%e7%b4%a2%e4%bd%93%e9%aa%8c%e7%9a%84%e9%97%ae%e9%a2%98》&body=https%3a%2f%2fioerr.github.io%2fdianshang-wangzhan-sousuo-tiyan-de-wenti%2f" onclick="window.open(this.href); return false;"><i class="fa  fa-envelope-o"></i></a>
</div>

<div class="post-meta-code">
  <div class="desc">
    
      categories = 
      
        
          <a href="https://ioerr.github.io//categories/%E7%99%BE%E6%97%A0%E7%A6%81%E5%BF%8C">#百无禁忌 </a>
        
          <a href="https://ioerr.github.io//categories/%E4%BA%BA%E5%93%81%E7%95%8C%E9%9D%A2">#人品界面 </a>
        
    
  </div>
  <div class="desc">
    
    tags = 
      
        <a href="https://ioerr.github.io/tags/%E7%94%B5%E5%AD%90%E5%95%86%E5%8A%A1">#电子商务 </a>
      
        <a href="https://ioerr.github.io/tags/%E6%90%9C%E7%B4%A2">#搜索 </a>
      
        <a href="https://ioerr.github.io/tags/%E7%94%A8%E6%88%B7%E4%BD%93%E9%AA%8C">#用户体验 </a>
      
    
  </div>
</div>

  <div class="seperator">
    <img src="/images/seperator.svg" />
  </div>

  <a href="https://ioerr.github.io/dianshang-wangzhan-sousuo-tiyan-de-wenti/">
  <div class="post-title">
    <img src="/images/post-title-icon.svg" />
    <div class="post-meta">
      <time>19 Jan 2017, 16:44</time>
      <h1>电商网站搜索体验的问题</h1>
    </div>
  </div>
</a>

<div class="post-toc">
  <span class="title">
    Table of contents
  </span>
  
</div>

<section class="post-content">
  <p>不得不说在淘宝、天猫这种有大量第三方商家入驻的平台搜索商品的体验非常差。</p>

<p>一大问题就是商品图片相互抄袭多，一个关键词搜出来的结果，满屏幕都是雷同的图片。<br />
不但毫无区分商品的作用，还变相鼓励商家互相抄袭——反正用户也不在乎/没法在乎商品图片的差异，为何不偷别人的图片呢？</p>

<p>如果搜索结果可以适当合并，商品图片雷同的放到二级目录，会不会有所改善呢？</p>

<p>第二个问题是商品如果有多个套餐，在搜索结果中只能看到其套餐的最高、最低价格范围。<br />
结果就是，套餐并不便宜的商品，可以增加一个便宜的鸡肋选项，导致看上去价格低于套餐相对便宜的商品，于是在按价格排序的搜索结果中排名前列。<br />
而且套餐捆绑的附属商品不一样，价格千差万别，直接用套餐价格排序，对用户来说参考价值就很低了。</p>

<p>举个例子：<br />
店家甲的套餐如下：</p>

<ul>
<li>套餐一15000元：相机+三脚架+存储卡</li>
<li>套餐二17000元：相机+三脚架+存储卡+某镜头</li>
</ul>

<p>店家乙的套餐如下：</p>

<ul>
<li>套餐一15000元：相机+存储卡+读卡器+副厂电池+闪光灯</li>
<li>套餐二16000元：相机+存储卡+读卡器+原厂电池+原厂充电器+相机包+闪光灯+引闪线++UV镜</li>
</ul>

<p>这时一个已经有闪光灯，不需要多配电池、相机包，但是可能需要三脚架和替换镜头的消费者，无法直接在搜索结果中了解到店家甲的套餐可能更合适，而店家乙的套餐根本不用看。<br />
他只能一个个的点进去看价格可能更便宜但不合适的套餐商品，然后一次次的退出来继续寻找。</p>

<p>这就涉及到电商平台套餐内商品资源登记管理和组合的基础架构问题，搜索操作的后台性能消耗也可能剧增。<br />
要是发生变更，第三方商家也要改变编辑商品信息的操作方式。</p>

<p>第三个问题是商品描述信息仍然不准确、缺少分类。</p>

<p>一大原因是第三方商家滥用关键字。<br />
且不说韩式、北欧、极简、英伦等关键字泛滥，有时候连基本的款式、颜色、配置都可以瞎说。</p>

<p>其次则是商品信息仍然无法详细、准确地录入和筛选，这方面要耗费极大的人工，还难以保证精确。<br />
虽然许多电商平台提供了一些属性信息做筛选，但还远远不够用。<br />
比如说，买键盘要筛选键帽类型、带不带酷炫灯光，买相机要筛有没有匹配卡口的指定焦段的配套镜头，买折叠自行车要筛选前后轮刹车类型，买电脑要筛选是否可自己扩展内存，等等等等……<br />
甚至如果达到理想状态的话，其他买家针对某个属性的评价也应该要直接列入筛选选项中。</p>

<p>而现在的搜索和筛选结果实在距离这个要求太远。<br />
结果就是，如果有得选择，我还是更加相信专业的评测（比如 <a href="http://thewirecutter.com/">Wirecutter</a>）、身边熟人的推荐，并尽量在靠谱的 B2C 电商平台上购买。</p>

</section>

<div class="comment">
  <a href="http://twitter.com/intent/tweet?url=https%3a%2f%2fioerr.github.io%2fdianshang-wangzhan-sousuo-tiyan-de-wenti%2f&text= @calon %e7%94%b5%e5%95%86%e7%bd%91%e7%ab%99%e6%90%9c%e7%b4%a2%e4%bd%93%e9%aa%8c%e7%9a%84%e9%97%ae%e9%a2%98&tw_p=tweetbutton" onclick="window.open(this.href); return false;"><i class="fa fa-twitter"></i></a>
  <a href="mailto:calon.xu@gmail.com?subject=评论《%e7%94%b5%e5%95%86%e7%bd%91%e7%ab%99%e6%90%9c%e7%b4%a2%e4%bd%93%e9%aa%8c%e7%9a%84%e9%97%ae%e9%a2%98》&body=https%3a%2f%2fioerr.github.io%2fdianshang-wangzhan-sousuo-tiyan-de-wenti%2f" onclick="window.open(this.href); return false;"><i class="fa  fa-envelope-o"></i></a>
</div>

<div class="post-meta-code">
  <div class="desc">
    
      categories = 
      
        
          <a href="https://ioerr.github.io//categories/%E7%99%BE%E6%97%A0%E7%A6%81%E5%BF%8C">#百无禁忌 </a>
        
          <a href="https://ioerr.github.io//categories/%E4%BA%BA%E5%93%81%E7%95%8C%E9%9D%A2">#人品界面 </a>
        
    
  </div>
  <div class="desc">
    
    tags = 
      
        <a href="https://ioerr.github.io/tags/%E7%94%B5%E5%AD%90%E5%95%86%E5%8A%A1">#电子商务 </a>
      
        <a href="https://ioerr.github.io/tags/%E6%90%9C%E7%B4%A2">#搜索 </a>
      
        <a href="https://ioerr.github.io/tags/%E7%94%A8%E6%88%B7%E4%BD%93%E9%AA%8C">#用户体验 </a>
      
    
  </div>
</div>

  <div class="seperator">
    <img src="/images/seperator.svg" />
  </div>

  <a href="https://ioerr.github.io/cong-wordpress-qianyi-dao-hugo/">
  <div class="post-title">
    <img src="/images/post-title-icon.svg" />
    <div class="post-meta">
      <time>17 Jan 2017, 17:32</time>
      <h1>从 WordPress 迁移到 Hugo</h1>
    </div>
  </div>
</a>

<div class="post-toc">
  <span class="title">
    Table of contents
  </span>
  
</div>

<section class="post-content">
  <p>虽然在 Weblogs.us 驻留了很久，但不免还是担心万一有一天停止提供这么好的服务了，要如何快速迁移网站。<br />
而且最近几年用静态网站写 blog 的风潮越来越流行，总想着可以尝试一把。</p>

<p>最开始是考察了最流行基于 Ruby 的 Jekyll 和 Octopress，然后是基于 Python 的 Pelican 和基于 node.js 的 Hexo。<br />
选择很多，主题也很丰富，然而实在不喜欢脚本语言折腾安装部署环境的操作。<br />
就算已经安装了环境，还要考虑更换电脑之后如何重新配置，或者做绿色便携改造。<br />
而且站点生成效率也是重要的考量因素。</p>

<p>因此最后决定尝试基于 Golang 的 Hugo。<br />
只是没想到一趟折腾下来的坑也不少，这里做个记录，方便有需求者少走弯路。</p>

<ul>
<li>安装 Hugo</li>
</ul>

<p>在 <a href="https://github.com/spf13/hugo/releases">Hugo 的 Github 发布页面</a>直接下载安装包或自己编译就行。</p>

<ul>
<li>导出和转换 WordPress 的内容</li>
</ul>

<p>如果你运气够好，可以安装直接导入的插件：<a href="https://github.com/SchumacherFM/wordpress-to-hugo-exporter">wordpress-to-hugo-exporter </a>。<br />
然后从 WordPress 的管理面板 Tool 菜单中直接导出可以用于 Hugo 的内容。</p>

<p>或者也可以用 <a href="https://github.com/SenjinDarashiva/JekyllToHugo">JekyllToHugo</a> 加 <a href="https://github.com/coderzh/ConvertToHugo">ConvertToHugo</a> 的组合搞定。</p>

<p>然而悲剧的是，Weblogs.us 可以安装以上插件，却在导出时报权限不足：failed to open dir: Permission denied <br />
推测与 Weblogs.us 的服务器设置有关，不想麻烦服务方帮忙，于是只能另想办法。</p>

<p>最终还是用 WordPress 自带的导出功能，导出所有内容的 XML 文件。<br />
然后结合 Python 脚本 <a href="https://github.com/thomasf/exitwp">Exitwp</a> 转换为 Jekyll 适用的内容。<br />
注意，Exitwp 我是在 Ubuntu 下安装使用的，具体参考作者的文档。<br />
如果遇到解析出错的情况，比如我遇到无法正确处理包含以下内容的部分：<br />
<code>&lt;atom:link rel=&quot;hub&quot; href=&quot;http://pubsubhubbub.appspot.com&quot;/&gt;&lt;atom:link rel=&quot;hub&quot; href=&quot;http://pubsubhubbub.superfeedr.com&quot;/&gt;</code><br />
直接删除再试就可以了。</p>

<ul>
<li>折腾 Markdown 内容</li>
</ul>

<p>Markdown 格式默认不支持硬换行特性，也就是说，如果你在 WordPress 写文章时喜欢用换行而不是段落，那么转换为 Markdown 格式后虽然保留了换行，但转换为 HTML 展现出来的是不换行的结果，原来的换行之间替换为了空格，原来的多行内容挤在了一行。（之前有过<a href="../pandoc-markdown">吐槽</a>）</p>

<p>虽然可以用 Pandoc 批量转换，但Pandoc 在转换为 Markdown 格式时会在下划线前增加反斜线。<br />
而导出的 WordPress XML 中包含有文章的 slug 地址，像我就在 slug 中统一使用下划线代替空格分隔单词和词组拼音。<br />
于是，这就导致转换后的 slug 地址不正确。<br />
只好祭出 sed 做批量调整，在包含有指定字符串的一行中将下划线替换为短横线连字号：</p>

<pre><code>sed -i &quot;/slug:/s/_/-/g&quot; *.markdown
sed -i &quot;/link:/s/_/-/g&quot; *.markdown
</code></pre>

<p>然后再写个 shell 脚本搞定 Pandoc 批量转换：</p>

<pre><code>FILES=*.markdown
for f in $FILES
do
  filename=&quot;${f%.*}&quot;
  `pandoc -s -f markdown+hard_line_breaks $f -t markdown -o $filename.markdown`
done
</code></pre>

<p>转换完之后，发现 Pandoc 将 Jekyll 导入文件头部的 YAML 格式部分的 <code>---</code> 替换成了 <code>...</code>，这会导致 Hugo 解析出错。<br />
于是再用 sed 改回来：</p>

<pre><code>sed -i &quot;s/^...$/---/g&quot; *.markdown
</code></pre>

<ul>
<li>选择 Hugo 模板</li>
</ul>

<p>Hugo 官方站点有少量<a href="http://themes.gohugo.io/">模板演示</a>，不少是从 Jekyll 的模板改的。<br />
美观的模板有不少，但要找到既好看又符合功能需求的就比较困难了。</p>

<p>比如我的要求是：</p>

<ol>
<li>简洁风格；</li>
<li>支持翻页；</li>
<li>支持类别（category）展示；</li>
<li>支持响应式布局优先；</li>
<li>支持标签（tag）优先；</li>
<li>单栏布局优先；</li>
<li>方便自定义修改。</li>
</ol>

<p>尝试了多个主题之后，最终决定使用这款<a href="http://themes.gohugo.io/hugo-hello-programmer-theme/">Hello Programmer</a>。<br />
默认支持类别、标签、翻页，单栏布局。<br />
使用的主页图片和 favicon 则需要自己绘制。</p>

<ul>
<li>发布到 Github Pages</li>
</ul>

<p>因为一切以偷懒为目标，所以为了减少麻烦，申请的是用户或组织模式的 Github Pages。<br />
操作步骤参考<a href="https://pages.github.com/">官方文档</a>就成。</p>

<p>然而，因为主题中引用了 Font Awesome 字体，在默认限制 icon font 跨域访问的 Firefox 下会报错：<br />
<code>已阻止交叉源请求：同源策略不允许读取...上的远程资源。可以将资源移动到相同的域名上或者启用 CORS 来解决这个问题。</code></p>

<p>最省事的方法，就是将网络字体下载下来，合并在主题中，同时更改 CSS 中相应的地址为本地相对地址。</p>

<p>一切就绪之后，用 Hugo 命令生成静态网页。<br />
像这个 blog 有1000多篇文章，900多个标签，15个类别，生成的静态网站体积也有好几十 MB…<br />
说实话，体积这么大，小文件又多，提交、拉取和通过网盘同步备份还是挺不爽的。<br />
好在有 Golang 加持，生成的效率超高，生成时间只有1、2秒左右。</p>

<p>最后，使用 Github Pages 的话，RSS 订阅地址也变成了 <a href="https://ioerr.github.io/index.xml">https://ioerr.github.io/index.xml</a></p>

</section>

<div class="comment">
  <a href="http://twitter.com/intent/tweet?url=https%3a%2f%2fioerr.github.io%2fcong-wordpress-qianyi-dao-hugo%2f&text= @calon %e4%bb%8e%20WordPress%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Hugo&tw_p=tweetbutton" onclick="window.open(this.href); return false;"><i class="fa fa-twitter"></i></a>
  <a href="mailto:calon.xu@gmail.com?subject=评论《%e4%bb%8e%20WordPress%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Hugo》&body=https%3a%2f%2fioerr.github.io%2fcong-wordpress-qianyi-dao-hugo%2f" onclick="window.open(this.href); return false;"><i class="fa  fa-envelope-o"></i></a>
</div>

<div class="post-meta-code">
  <div class="desc">
    
      categories = 
      
        
          <a href="https://ioerr.github.io//categories/%E5%A4%A7%E6%9D%82%E7%83%A9">#大杂烩 </a>
        
          <a href="https://ioerr.github.io//categories/blog">#Blog </a>
        
          <a href="https://ioerr.github.io//categories/wordpress">#WordPress </a>
        
    
  </div>
  <div class="desc">
    
    tags = 
      
        <a href="https://ioerr.github.io/tags/wordpress">#WordPress </a>
      
        <a href="https://ioerr.github.io/tags/hugo">#Hugo </a>
      
        <a href="https://ioerr.github.io/tags/%E4%B8%BB%E9%A2%98">#主题 </a>
      
        <a href="https://ioerr.github.io/tags/weblogs.us">#Weblogs.us </a>
      
        <a href="https://ioerr.github.io/tags/markdown">#Markdown </a>
      
    
  </div>
</div>

  <div class="seperator">
    <img src="/images/seperator.svg" />
  </div>

  <a href="https://ioerr.github.io/cong-wordpress-qianyi-dao-hugo/">
  <div class="post-title">
    <img src="/images/post-title-icon.svg" />
    <div class="post-meta">
      <time>17 Jan 2017, 17:32</time>
      <h1>从 WordPress 迁移到 Hugo</h1>
    </div>
  </div>
</a>

<div class="post-toc">
  <span class="title">
    Table of contents
  </span>
  
</div>

<section class="post-content">
  <p>虽然在 Weblogs.us 驻留了很久，但不免还是担心万一有一天停止提供这么好的服务了，要如何快速迁移网站。<br />
而且最近几年用静态网站写 blog 的风潮越来越流行，总想着可以尝试一把。</p>

<p>最开始是考察了最流行基于 Ruby 的 Jekyll 和 Octopress，然后是基于 Python 的 Pelican 和基于 node.js 的 Hexo。<br />
选择很多，主题也很丰富，然而实在不喜欢脚本语言折腾安装部署环境的操作。<br />
就算已经安装了环境，还要考虑更换电脑之后如何重新配置，或者做绿色便携改造。<br />
而且站点生成效率也是重要的考量因素。</p>

<p>因此最后决定尝试基于 Golang 的 Hugo。<br />
只是没想到一趟折腾下来的坑也不少，这里做个记录，方便有需求者少走弯路。</p>

<ul>
<li>安装 Hugo</li>
</ul>

<p>在 <a href="https://github.com/spf13/hugo/releases">Hugo 的 Github 发布页面</a>直接下载安装包或自己编译就行。</p>

<ul>
<li>导出和转换 WordPress 的内容</li>
</ul>

<p>如果你运气够好，可以安装直接导入的插件：<a href="https://github.com/SchumacherFM/wordpress-to-hugo-exporter">wordpress-to-hugo-exporter </a>。<br />
然后从 WordPress 的管理面板 Tool 菜单中直接导出可以用于 Hugo 的内容。</p>

<p>或者也可以用 <a href="https://github.com/SenjinDarashiva/JekyllToHugo">JekyllToHugo</a> 加 <a href="https://github.com/coderzh/ConvertToHugo">ConvertToHugo</a> 的组合搞定。</p>

<p>然而悲剧的是，Weblogs.us 可以安装以上插件，却在导出时报权限不足：failed to open dir: Permission denied <br />
推测与 Weblogs.us 的服务器设置有关，不想麻烦服务方帮忙，于是只能另想办法。</p>

<p>最终还是用 WordPress 自带的导出功能，导出所有内容的 XML 文件。<br />
然后结合 Python 脚本 <a href="https://github.com/thomasf/exitwp">Exitwp</a> 转换为 Jekyll 适用的内容。<br />
注意，Exitwp 我是在 Ubuntu 下安装使用的，具体参考作者的文档。<br />
如果遇到解析出错的情况，比如我遇到无法正确处理包含以下内容的部分：<br />
<code>&lt;atom:link rel=&quot;hub&quot; href=&quot;http://pubsubhubbub.appspot.com&quot;/&gt;&lt;atom:link rel=&quot;hub&quot; href=&quot;http://pubsubhubbub.superfeedr.com&quot;/&gt;</code><br />
直接删除再试就可以了。</p>

<ul>
<li>折腾 Markdown 内容</li>
</ul>

<p>Markdown 格式默认不支持硬换行特性，也就是说，如果你在 WordPress 写文章时喜欢用换行而不是段落，那么转换为 Markdown 格式后虽然保留了换行，但转换为 HTML 展现出来的是不换行的结果，原来的换行之间替换为了空格，原来的多行内容挤在了一行。（之前有过<a href="../pandoc-markdown">吐槽</a>）</p>

<p>虽然可以用 Pandoc 批量转换，但Pandoc 在转换为 Markdown 格式时会在下划线前增加反斜线。<br />
而导出的 WordPress XML 中包含有文章的 slug 地址，像我就在 slug 中统一使用下划线代替空格分隔单词和词组拼音。<br />
于是，这就导致转换后的 slug 地址不正确。<br />
只好祭出 sed 做批量调整，在包含有指定字符串的一行中将下划线替换为短横线连字号：</p>

<pre><code>sed -i &quot;/slug:/s/_/-/g&quot; *.markdown
sed -i &quot;/link:/s/_/-/g&quot; *.markdown
</code></pre>

<p>然后再写个 shell 脚本搞定 Pandoc 批量转换：</p>

<pre><code>FILES=*.markdown
for f in $FILES
do
  filename=&quot;${f%.*}&quot;
  `pandoc -s -f markdown+hard_line_breaks $f -t markdown -o $filename.markdown`
done
</code></pre>

<p>转换完之后，发现 Pandoc 将 Jekyll 导入文件头部的 YAML 格式部分的 <code>---</code> 替换成了 <code>...</code>，这会导致 Hugo 解析出错。<br />
于是再用 sed 改回来：</p>

<pre><code>sed -i &quot;s/^...$/---/g&quot; *.markdown
</code></pre>

<ul>
<li>选择 Hugo 模板</li>
</ul>

<p>Hugo 官方站点有少量<a href="http://themes.gohugo.io/">模板演示</a>，不少是从 Jekyll 的模板改的。<br />
美观的模板有不少，但要找到既好看又符合功能需求的就比较困难了。</p>

<p>比如我的要求是：</p>

<ol>
<li>简洁风格；</li>
<li>支持翻页；</li>
<li>支持类别（category）展示；</li>
<li>支持响应式布局优先；</li>
<li>支持标签（tag）优先；</li>
<li>单栏布局优先；</li>
<li>方便自定义修改。</li>
</ol>

<p>尝试了多个主题之后，最终决定使用这款<a href="http://themes.gohugo.io/hugo-hello-programmer-theme/">Hello Programmer</a>。<br />
默认支持类别、标签、翻页，单栏布局。<br />
使用的主页图片和 favicon 则需要自己绘制。</p>

<ul>
<li>发布到 Github Pages</li>
</ul>

<p>因为一切以偷懒为目标，所以为了减少麻烦，申请的是用户或组织模式的 Github Pages。<br />
操作步骤参考<a href="https://pages.github.com/">官方文档</a>就成。</p>

<p>然而，因为主题中引用了 Font Awesome 字体，在默认限制 icon font 跨域访问的 Firefox 下会报错：<br />
<code>已阻止交叉源请求：同源策略不允许读取...上的远程资源。可以将资源移动到相同的域名上或者启用 CORS 来解决这个问题。</code></p>

<p>最省事的方法，就是将网络字体下载下来，合并在主题中，同时更改 CSS 中相应的地址为本地相对地址。</p>

<p>一切就绪之后，用 Hugo 命令生成静态网页。<br />
像这个 blog 有1000多篇文章，900多个标签，15个类别，生成的静态网站体积也有好几十 MB…<br />
说实话，体积这么大，小文件又多，提交、拉取和通过网盘同步备份还是挺不爽的。<br />
好在有 Golang 加持，生成的效率超高，生成时间只有1、2秒左右。</p>

<p>最后，使用 Github Pages 的话，RSS 订阅地址也变成了 <a href="https://ioerr.github.io/index.xml">https://ioerr.github.io/index.xml</a></p>

</section>

<div class="comment">
  <a href="http://twitter.com/intent/tweet?url=https%3a%2f%2fioerr.github.io%2fcong-wordpress-qianyi-dao-hugo%2f&text= @calon %e4%bb%8e%20WordPress%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Hugo&tw_p=tweetbutton" onclick="window.open(this.href); return false;"><i class="fa fa-twitter"></i></a>
  <a href="mailto:calon.xu@gmail.com?subject=评论《%e4%bb%8e%20WordPress%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Hugo》&body=https%3a%2f%2fioerr.github.io%2fcong-wordpress-qianyi-dao-hugo%2f" onclick="window.open(this.href); return false;"><i class="fa  fa-envelope-o"></i></a>
</div>

<div class="post-meta-code">
  <div class="desc">
    
      categories = 
      
        
          <a href="https://ioerr.github.io//categories/%E5%A4%A7%E6%9D%82%E7%83%A9">#大杂烩 </a>
        
          <a href="https://ioerr.github.io//categories/blog">#Blog </a>
        
          <a href="https://ioerr.github.io//categories/wordpress">#WordPress </a>
        
    
  </div>
  <div class="desc">
    
    tags = 
      
        <a href="https://ioerr.github.io/tags/wordpress">#WordPress </a>
      
        <a href="https://ioerr.github.io/tags/hugo">#Hugo </a>
      
        <a href="https://ioerr.github.io/tags/%E4%B8%BB%E9%A2%98">#主题 </a>
      
        <a href="https://ioerr.github.io/tags/weblogs.us">#Weblogs.us </a>
      
        <a href="https://ioerr.github.io/tags/markdown">#Markdown </a>
      
    
  </div>
</div>

  <div class="seperator">
    <img src="/images/seperator.svg" />
  </div>

  <a href="https://ioerr.github.io/tiyan-dangdang-shiti-shudian/">
  <div class="post-title">
    <img src="/images/post-title-icon.svg" />
    <div class="post-meta">
      <time>24 Oct 2016, 05:06</time>
      <h1>体验当当实体书店</h1>
    </div>
  </div>
</a>

<div class="post-toc">
  <span class="title">
    Table of contents
  </span>
  
</div>

<section class="post-content">
  <p>周末去了一趟梅溪湖步步高新天地的当当梅溪书院，听说是当当试水实体书店后在长沙开的第一家，价格与当当网上价格一致，而且有专门的儿童阅读区，正好让儿子感受一下。</p>

<p>进去的第一感觉是人不少，比新华书店热闹多了，和定王台图书城、书市一个等级。<br />
装修设计感觉比较显档次（结账时听见身旁的小女生对朋友说，“厕所的设施好高级，快去上！”囧，不就是
Kohler 的洁具吗？），层高高，空间大，灯光柔和。侧门还有咖啡馆。<br />
看着书籍不少，上下三层之外，还有夹层和楼梯墙面到处摆着书。最上面一层是讲座交流厅，去的时候正好有个名叫麦洛洛的作家的读者见面会。<br />
成人阅读区放着长桌和椅子，儿童阅读区则是像小游泳池一样的小池子，小孩子可以坐在池底或靠在池边看书。</p>

<p>在里面待到下午才离开，感觉体验上的问题还是不少：</p>

<p>1、不能试读的书太多<br />
实体书店因为成本高，不可避免要面对顾客看书多、买书少的问题，所以现在的趋势是很多书都不拆封，顾客要么上网查评价，要么看书名、封面、封底就决定要不要买。</p>

<p>但是这样对看重书籍内容质量的读者来说简直就是灾难：<br />
网上评价良莠不齐，水军横行，别人的评价可以参考，但书好不好，自己摸过才最清楚；<br />
市面上的名家推荐全部都不靠谱，甚至可以当作排雷指南；<br />
设计装帧也完全不能和内容质量联系起来。</p>

<p>而当当的书店中大部分书都不允许拆封、无法试读。<br />
儿童书籍尤其突出，只有阅读区周围一圈书架上还有已经拆封的，其他书架上就是摆看的。</p>

<p>我们倒是很想买一套儿童科普类书籍，但是成套书籍不能拆封，完全无法获得足够多的有效信息。<br />
特别是内是否浅显易懂，容是否符合这个阶段小朋友的认知水平，这是决定购买的最重要因素，现在基本靠瞎蒙。</p>

<p>2、布局杂乱<br />
装修虽然高大上，但区域划分、信息指示和楼梯通道设计都造成初来的顾客不容易摸清方向。<br />
大部分书架附近没有阅读区，导致不少读者只能在窗台、楼梯、墙角看书，也增加了杂乱的感觉。</p>

<p>3、书籍分拣杂乱<br />
感觉书架分拣整理不到位，经常发现不属于这一类的书籍，也可能与阅读区太少、离书架比较远的原因——读者看完了书更愿意往附近的书架放，懒得多走几步分别放回原位。</p>

<p>4、书籍种类还是太少<br />
放眼望去，成人类书籍大部分还是挺主流的，我关心的几个分类下面，冷门偏门的书籍少得可怜，还不如定王台一些有专业优势的小店铺选择多。<br />
三层当中，一层是交流区，一层是儿童专区（包括部分育儿类书籍），一层有一大半是畅销书展示柜、收银台和通俗文学区，剩下的留给学术类书籍的比例有多少可想而知（其中还有鸡汤类营养学书籍）。</p>

<p>5、收银买单效率低<br />
结账买单时，排队等待的时间太长，前面一位更是花了5分钟时间。<br />
人流较多的时候，两个收银台都排了7、8位。</p>

<p>综合来说，我觉得当当的实体书店的体验和想象中的差距比较大。<br />
我心目中的网络书店的实体店面，应该是为网络书店服务的，只是为看重体验和内容的用户增加体验的渠道。<br />
书一般不是急需当场消费的商品，携带不便，排队付款也浪费时间，没有必要引导顾客现场购买实体商品。<br />
倒不如优化会员体验以及线上购物车联动的下单付款流程，在实体书店挑到中意的书籍后，现场付费后送货上门就行，而且免费送货上门的门槛可以更低。<br />
怕拆封的书太多增加成本，就不要摆许多不允许拆封的，每种书提供2、3本试读本就行，这样可以丰富种类，提高冷门偏门书籍露面的机会，网络书店的个性化推荐系统很难让人发现惊喜，而实体书店的随机浏览模式更容易取悦喜欢在书海中漫游的人。同时也能降低一点物流、库存周转、占地的成本。<br />
真心看重内容和实物体验的顾客，比一般的顾客更舍得花钱投入，实体书店与其拼规模，不如做好这部分高价值顾客的服务——前提是能够找准这类顾客，而消费流程并没有脱离网络，也更有利于挖掘发现这类顾客。</p>

<p><a href="http://s111.photobucket.com/user/calon_plus/media/3ae34f05-4740-44c0-b369-57e113961fc3.jpg.html"><img src="http://i111.photobucket.com/albums/n154/calon_plus/3ae34f05-4740-44c0-b369-57e113961fc3.jpg" alt="photo
3ae34f05-4740-44c0-b369-57e113961fc3.jpg" /></a></p>

<p><a href="http://s111.photobucket.com/user/calon_plus/media/95f49390-5edc-4dd5-868c-4f3311378a9b.jpg.html"><img src="http://i111.photobucket.com/albums/n154/calon_plus/95f49390-5edc-4dd5-868c-4f3311378a9b.jpg" alt="photo
95f49390-5edc-4dd5-868c-4f3311378a9b.jpg" /></a></p>

</section>

<div class="comment">
  <a href="http://twitter.com/intent/tweet?url=https%3a%2f%2fioerr.github.io%2ftiyan-dangdang-shiti-shudian%2f&text= @calon %e4%bd%93%e9%aa%8c%e5%bd%93%e5%bd%93%e5%ae%9e%e4%bd%93%e4%b9%a6%e5%ba%97&tw_p=tweetbutton" onclick="window.open(this.href); return false;"><i class="fa fa-twitter"></i></a>
  <a href="mailto:calon.xu@gmail.com?subject=评论《%e4%bd%93%e9%aa%8c%e5%bd%93%e5%bd%93%e5%ae%9e%e4%bd%93%e4%b9%a6%e5%ba%97》&body=https%3a%2f%2fioerr.github.io%2ftiyan-dangdang-shiti-shudian%2f" onclick="window.open(this.href); return false;"><i class="fa  fa-envelope-o"></i></a>
</div>

<div class="post-meta-code">
  <div class="desc">
    
      categories = 
      
        
          <a href="https://ioerr.github.io//categories/%E4%B9%A6%E9%A6%99%E5%89%91%E6%B0%94">#书香剑气 </a>
        
          <a href="https://ioerr.github.io//categories/%E4%BA%BA%E5%93%81%E7%95%8C%E9%9D%A2">#人品界面 </a>
        
    
  </div>
  <div class="desc">
    
    tags = 
      
        <a href="https://ioerr.github.io/tags/%E5%AE%9E%E4%BD%93%E4%B9%A6%E5%BA%97">#实体书店 </a>
      
        <a href="https://ioerr.github.io/tags/%E5%BD%93%E5%BD%93">#当当 </a>
      
    
  </div>
</div>

  <div class="seperator">
    <img src="/images/seperator.svg" />
  </div>


<div class="paging">
  
  <a href="/page/6/" rel="prev">
    <i class="fa fa-caret-left" aria-hidden="true"></i> Prev
  </a>
  

  PAGE 7 / 460

  
  <a href="/page/8/" rel="next">
    Next <i class="fa fa-caret-right" aria-hidden="true"></i>
  </a>
  
</div>


<footer class="footer">
    COPYRIGHT (C) <a href="http://blog.lulab.net">DONGGEUN,BANG</a>. ALL RIGHTS RESERVED.
</footer>



</body>

</html>

